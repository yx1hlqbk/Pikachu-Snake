<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Neon Snake | 皮卡丘養成計畫</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="background-glob"></div>
    <div class="background-glob second"></div>

    <div class="game-container">
        <header class="game-header blur-panel">
            <div class="score-box">
                <span class="label">分數</span>
                <span id="score" class="value">0</span>
            </div>
            <div class="title">皮卡丘養成計畫</div>
            <div class="score-box">
                <span class="label">最高分</span>
                <span id="high-score" class="value">0</span>
            </div>
        </header>
        <div id="meowth-timer" class="meowth-timer hidden">
            喵喵復活: <span id="meowth-countdown">0</span>秒 | 將出現於<span id="meowth-respawn-location">中央區域</span>
        </div>
        <div id="meowth-spawn-alert" class="meowth-spawn-alert hidden">
            ⚠️ 喵喵將在 <span id="meowth-spawn-countdown">5</span> 秒後出現於<span id="meowth-spawn-location">中央區域</span>!
        </div>

        <!-- Buff 容器 -->
        <div id="buff-container" class="buff-container">
            <!-- 動態生成的 Buff 圖示 -->
        </div>

        <div class="canvas-wrapper blur-panel">
            <canvas id="gameCanvas" width="600" height="600"></canvas>

            <div id="start-screen" class="overlay active">
                <h1 class="glow-text">皮卡丘養成計畫</h1>
                <div class="input-group">
                    <input type="text" id="player-name-input" placeholder="輸入你的名字" maxlength="10" class="neon-input">
                </div>
                <p class="subtitle" id="instruction-text">使用方向鍵移動</p>
                <div id="gesture-hint" class="gesture-hint hidden">
                    <div class="hand-icon">👆</div>
                </div>
                <button id="start-btn" class="glow-button">開始遊戲</button>

                <div class="pikachu-walk-container">
                    <img src="assets/pikachu_walking.gif" alt="Pikachu" class="pikachu-walk-img">
                </div>
            </div>

            <div id="instructions-dialog" class="overlay hidden">
                <div class="dialog-content">
                    <h2 class="glow-text">📖 遊戲說明</h2>
                    <div class="instructions-list" id="instructions-list">
                        <!-- JS Generated Content -->
                    </div>
                    <button id="start-game-confirm-btn" class="glow-button">我知道了</button>
                </div>
            </div>

            <div id="countdown-screen" class="overlay hidden">
                <div class="countdown-number">3</div>
            </div>

            <div id="game-over-screen" class="overlay hidden">
                <h2 class="glow-text error">遊戲結束</h2>
                <p class="final-score">分數: <span id="final-score-val">0</span></p>

                <div class="leaderboard-container">
                    <h3>排行榜</h3>
                    <ul id="leaderboard-list">
                        <!-- Items will be injected here -->
                    </ul>
                </div>

                <div class="button-group">
                    <button id="restart-btn" class="glow-button">再玩一次</button>
                    <button id="home-btn" class="glow-button">回到首頁</button>
                </div>
            </div>
        </div>

        <div id="changelog-screen" class="overlay hidden">
            <h2 class="glow-text" style="font-size: 2.5rem;">版本更新日誌</h2>
            <div class="changelog-container" style="max-height: 60vh; overflow-y: auto; padding: 10px;">
                <div class="changelog-item">
                    <div class="ver-tag">v1.3.1</div>
                    <div class="ver-content">
                        <h4>🌊 始源之海：蓋歐卡覺醒</h4>
                        <ul>
                            <li>🐋 <strong>蓋歐卡登場</strong>：傳說寶可夢「蓋歐卡」潛入遊戲！</li>
                            <li>💧 <strong>始源之雨</strong>：獲得蓋歐卡的祝福，地圖將降下<strong>能量水滴</strong>，收集越多得分越高！</li>
                            <li>✨ <strong>資源優化</strong>：全面更新寶可夢圖片資源，載入更順暢。</li>
                        </ul>
                    </div>
                </div>
                <div class="changelog-item">
                    <div class="ver-tag">v1.3.0</div>
                    <div class="ver-content">
                        <h4>🔥 浴火重生：鳳王降臨</h4>
                        <ul>
                            <li>🦅 <strong>鳳王登場</strong>：傳說寶可夢「鳳王」翱翔天際！</li>
                            <li>🛡️ <strong>聖火護體</strong>：獲得鳳王的祝福，10秒內擁有<strong>無敵狀態</strong>，碰到喵喵也不會扣分！</li>
                            <li>✨ <strong>全新體驗</strong>：更加豐富的傳說寶可夢陣容，等你來挑戰！</li>
                        </ul>
                    </div>
                </div>
                <div class="changelog-item">
                    <div class="ver-tag">v1.2.7</div>
                    <div class="ver-content">
                        <h4>🌪️ 深海傳說降臨</h4>
                        <ul>
                            <li>🌊 <strong>洛奇亞登場</strong>：傳說寶可夢「洛奇亞」現身！</li>
                            <li>✨ <strong>分數加倍</strong>：獲得洛奇亞的祝福，10秒內獲得分數 <strong>x2 倍</strong>！</li>
                            <li>📜 <strong>介面優化</strong>：傳說能力說明面板現在可以滑動查看更多內容。</li>
                        </ul>
                    </div>
                </div>
                <div class="changelog-item">
                    <div class="ver-tag">v1.2.6</div>
                    <div class="ver-content">
                        <h4>🛠️ 介面與體驗優化</h4>
                        <ul>
                            <li>✨ <strong>傳說能力說明</strong>：新增傳說 Buff 說明頁面，隨時查看特殊效果。</li>
                            <li>🐛 <strong>問題修復</strong>：修正 Buff 圖示顯示異常與倒數計時器 Bug。</li>
                            <li>📱 <strong>顯示優化</strong>：調整手機版介面配置，操作更順手。</li>
                        </ul>
                    </div>
                </div>
                <div class="changelog-item">
                    <div class="ver-tag">v1.2.5</div>
                    <div class="ver-content">
                        <h4>✨ 傳說 Buff 系統登場</h4>
                        <ul>
                            <li>🟣 <strong>超夢</strong>：強大的念力場讓時間變慢（減速 50%）。</li>
                            <li>🌸 <strong>夢幻</strong>：輕盈的身手讓移動更迅速（加速 50%）。</li>
                            <li>📺 <strong>視覺優化</strong>：全新 Buff 狀態顯示，掌握能力剩餘時間。</li>
                        </ul>
                    </div>
                </div>
                <div class="changelog-item">
                    <div class="ver-tag">v1.2.4</div>
                    <div class="ver-content">
                        <h4>⏳ 復活倒數機制</h4>
                        <ul>
                            <li>✨ 新增「喵喵復活倒數」：當喵喵被打敗後，畫面上方將顯示復活倒數計時！</li>
                            <li>👀 戰況掌握：隨時掌握敵人動態，準備迎接下一波挑戰。</li>
                        </ul>
                    </div>
                </div>
            </div>
            <button id="close-changelog-btn" class="glow-button small" style="margin-top: 20px;">關閉</button>
        </div>

        <div id="leaderboard-screen" class="overlay hidden">
            <h2 class="glow-text">🏆 排行榜</h2>
            <div class="leaderboard-container">
                <ul id="main-leaderboard-list">
                    <!-- Items will be injected here -->
                </ul>
            </div>
            <button id="close-leaderboard-btn" class="glow-button small">關閉</button>
        </div>

        <div id="buff-info-screen" class="overlay hidden">
            <h2 class="glow-text">✨ 傳說能力</h2>
            <div class="buff-info-list" id="buff-info-list">
                <!-- JS Generated Items -->
            </div>
            <button id="close-buff-info-btn" class="glow-button small">關閉</button>
        </div>

        <div id="pokedex-screen" class="overlay hidden">
            <h2 class="glow-text">寶可夢圖鑑</h2>
            <div id="pokedex-tabs" class="pokedex-tabs">
                <button class="tab-button active" data-category="all">全部</button>
                <button class="tab-button" data-category="starters">一般寶可夢</button>
                <button class="tab-button" data-category="legendaries">傳說寶可夢</button>
            </div>
            <!-- wrap grid in a container for scrolling if needed, or modify grid css -->
            <div id="pokedex-grid" class="pokedex-grid">
                <!-- JS Generated Items -->
            </div>
            <button id="close-pokedex-btn" class="glow-button small" style="margin-top: 20px;">關閉</button>
        </div>

        <div id="marquee-container" class="marquee-container hidden">
            <div id="marquee-text"></div>
        </div>


        <div class="pokedex-section">
            <div class="button-row">
                <button id="toggle-pokedex-btn" class="glow-button small"><span class="btn-icon">📖</span> 查看圖鑑</button>
                <button id="show-buff-info-btn" class="glow-button small"><span class="btn-icon">✨</span> 傳說能力</button>
                <button id="show-leaderboard-btn" class="glow-button small"><span class="btn-icon">🏆</span>
                    排行榜</button>
                <button id="version-btn" class="glow-button small"><span class="btn-icon">📋</span> 版本更新</button>
            </div>
        </div>

        <footer class="game-footer">
            <p class="author">作者: ian liao</p>
            <div class="donation">
                <p class="donate-text">✨ 喜歡這款遊戲？請作者喝杯咖啡,點亮創作熱情! ☕</p>
                <!-- Wallet Address Removed as per request -->
            </div>
            <div style="margin-top: 15px; color: #666; font-size: 12px; letter-spacing: 2px;">
                Ver 1.3.1
            </div>
        </footer>
    </div>
    <script src="config.js?v=1.3.0"></script>
    <script src="assets/clean_manifest.js?v=1.3.0"></script>
    <script src="BuffManager.js?v=1.3.0"></script>
    <script src="script.js?v=1.3.0"></script>
</body>

</html>